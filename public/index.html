<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whatsaap Design</title>

    <link rel="stylesheet" href="style.css">

    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="userimg2.jpg" type="image/x-icon" class="cover" style=" border-radius: 50%;">

</head>

<body>
    <div class="container">
        <div class="leftSide">
            <!-- header -->
            <div class="header">
                <div class="userimg">
                    <img src="userimg2.jpg" class="cover">
                </div>
                <ul class="nav_icons">
                    <li>
                        <ion-icon name="scan-circle-outline"></ion-icon>
                    </li>
                    <li>
                        <ion-icon name="chatbox-outline"></ion-icon>
                    </li>
                    <li>
                        <ion-icon name="ellipsis-vertical-outline"></ion-icon>
                    </li>
                </ul>
            </div>
        
            <!-- search -->
            <div class="search_chat">
                <div>
                    <input type="text" placeholder="Search or start new chat">
                    <ion-icon name="search-outline"></ion-icon>
                </div>
            </div>
        
        
            <!-- chat list -->
            <div class="chatlist">
                <div class="block active">
                    <div class="imgBox">
                        <img src="img1.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>Rupesh kumar (BFF)</h4>
                            <p class="time">03:30</p>
                        </div>
                        <div class="message_p">
                            <p> Were are you bro. </p>
                        </div>
                    </div>
                </div>
        
        
                <div class="block unread">
                    <div class="imgBox">
                        <img src="img2.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>vikash bhaiya</h4>
                            <p class="time">03:35</p>
                        </div>
                        <div class="message_p">
                            <p>Hi, hero kha par ho </p>
                            <b>3</b>
                        </div>
                    </div>
                </div>
                <div class="block unread">
                    <div class="imgBox">
                        <img src="img3.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>Gulshan kumar</h4>
                            <p class="time">04:39</p>
                        </div>
                        <div class="message_p">
                            <p>Collage kab jayega </p>
                            <b>5</b>
                        </div>
                    </div>
                </div>
                <div class="block unread">
                    <div class="imgBox">
                        <img src="img4.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>Rmstar</h4>
                            <p class="time">05:10</p>
                        </div>
                        <div class="message_p">
                            <p>Pata nahi kon tha , bol rha tha kab jayega. </p>
                            <b>1</b>
                        </div>
                    </div>
                </div>
                <div class="block ">
                    <div class="imgBox">
                        <img src="img5.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>vikram kr</h4>
                            <p class="time">Yesterday</p>
                        </div>
                        <div class="message_p">
                            <p>kiya ho rha hai </p>
                            <!-- <b>2</b> -->
                        </div>
                    </div>
                </div>
                <div class="block">
                    <div class="imgBox">
                        <img src="img4.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>Rahul </h4>
                            <p class="time">Yesterday</p>
                        </div>
                        <div class="message_p">
                            <p>Hi </p>
                            <!-- <b>2</b> -->
                        </div>
                    </div>
                </div>
                <div class="block ">
                    <div class="imgBox">
                        <img src="img1.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>Niranjan kumar </h4>
                            <p class="time">Yesterday</p>
                        </div>
                        <div class="message_p">
                            <p>Hi, my name is khan </p>
                            <!-- <b>2</b> -->
                        </div>
                    </div>
                </div>
                <div class="block">
                    <div class="imgBox">
                        <img src="img2.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>Kumar deva </h4>
                            <p class="time">05/04/2022</p>
                        </div>
                        <div class="message_p">
                            <p>Hi </p>
                            <!-- <b>2</b> -->
                        </div>
                    </div>
                </div>
                <div class="block ">
                    <div class="imgBox">
                        <img src="img4.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4> Dinesh </h4>
                            <p class="time">05/04/2022</p>
                        </div>
                        <div class="message_p">
                            <p>Hi </p>
                            <!-- <b>2</b> -->
                        </div>
                    </div>
                </div>
                <div class="block ">
                    <div class="imgBox">
                        <img src="img6.jpg" class="cover">
                    </div>
                    <div class="details">
                        <div class="listHead">
                            <h4>Rahul </h4>
                            <p class="time">05/04/2022</p>
                        </div>
                        <div class="message_p">
                            <p>Hi </p>
                            <!-- <b>2</b> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="rightSide">
            <div class="header">
                <div class="imgText">
                    <div class="userimg">
                        <img src="img2.jpg" class="cover">
                    </div>
                    <h4>Sagar verma<br> <span>Online</span></h4>
                </div>
                <ul class="nav_icons">
                    <li>
                        <ion-icon name="search-outline"></ion-icon>
                    </li>

                    <li>
                        <ion-icon name="ellipsis-vertical-outline"></ion-icon>
                    </li>
                </ul>
            </div>

            <div class="chatBox">
                <div class="center">
                    <span id="hour">00</span>
                    <span id="minute">00</span>
                    <span id="ampm">AM </span>
                </div>
            </div>
           
                <form action="#" id="send-form" class="chatBox_input">
                    <ion-icon name="happy-outline"></ion-icon>
                    <ion-icon name="attach-outline"></ion-icon>
                    <input type="text" name="input" autocomplete="off" id="input" placeholder="Type a  message"default="false">
                    <button type="submit">
                        <ion-icon name="send-outline"></ion-icon>
                    </button>
    
                </form>
            
        </div>



      
    </div>
 
    <script src="socket.io/socket.io.js"></script>
    <script>
        //connect server to client
        var socket = io();

        //inisilize variables
        const form = document.getElementById('send-form');
        const input = document.getElementById('input');
        const chat_box = document.querySelector('.chatBox');

        //create a function form app message element
        const append = (message, position) => {
            const messageElement = document.createElement('div');
            messageElement.innerText = message;
            messageElement.classList.add('message');
            console.log(messageElement)
            messageElement.classList.add(position);
            chat_box.append(messageElement);
            chat_box.scrollTop = chat_box.scrollHeight;

            //add audio if user message
            let audio = new Audio('ting.mp3')
            if (position == 'frnd_message') {
                audio.play();
            }
        }
        //send the data if user send the message
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const message = input.value;
            input.value = "";
            append(`${message}`, "my_message");
            socket.emit('send', message)
        });

        //ask user name and displayed.
        const name = prompt("Enter your name to join Lets Chat")
        socket.emit('new-user-joined', name)

        //if user joined show it in the middle
        socket.on('user-joined', name => {
            append(`${name} joined the chat`, 'center')
        });

        //if user messages, show it in the middle
        socket.on('receive', data => {
            append(`${data.name}: ${data.message}`, 'frnd_message')
        });


        //if user left the chat, show it in the middle
        socket.on('left', name => {
            append(`${name} left the chat `, 'center');

        })

        // add date and time
        setInterval(() => {

            let hour = document.getElementById("hour")
            let minute = document.getElementById("minute")
            let ampm = document.getElementById("ampm");

            let h = new Date().getHours();
            let m = new Date().getMinutes();


            let am = h >= 12 ? "PM" : "AM";

            //convert 24 hours clock to 12 hour clock
            if (h > 12) {
                h -= 12;
            }

            h = (h < 10) ? "0" + h : h;
            m = (m < 10) ? "0" + m : m;


            hour.innerHTML = h;
            minute.innerHTML = m;

            ampm.innerHTML = am;
        }, 1000)



    </script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>